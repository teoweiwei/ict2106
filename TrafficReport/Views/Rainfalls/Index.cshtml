@model IQueryable<TrafficReport.Models.QueryViewModel>
@{
    ViewBag.Title = "Index";
}

<h2>Upload Rainfall Data</h2>
<div class="row">
    <div class="col-md-6">
        @using (Html.BeginForm("HandleForm", "RainFalls", FormMethod.Post))
        {
            <table>
                <tr>
                    <td>Region: </td>
                    <td>
                        @Html.DropDownList("regions", null, new { onchange = "this.form.submit()" })
                    </td>
                    <td>Road Name: </td>
                    <td colspan="2">
                        @Html.DropDownList("roadNames")
                    </td>


                </tr>

                <tr>
                    <td>Period: </td>
                    <td width="100px">
                        @Html.RadioButton("period", "1month", true) 1-Month
                    </td>
                    <td width="100px">@Html.RadioButton("period", "3month", false) 3-Month </td>
                    <td width="100px">@Html.RadioButton("period", "6month", false) 6-Months </td>
                    <td width="100px">@Html.RadioButton("period", "1year", false) 1-Year </td>

                </tr>


                <tr>
                    <td></td>
                    <td></td>
                    <td></td>

                    <td><input type="submit" value="Search" /></td>
                </tr>
            </table>
        }

        @if (!Model.Any())
        {
            <tr>
                <td>Theres nothing during this point of time. </td>
            </tr>
        }
        else {
            <table border="1">
                <tr>
                    <th>Road Name</th>
                    <th>Date</th>
                    <th>Rainfall Value</th>



                    @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            
                            @item.roadName
                        </td>

                        <td>
                        @if (ViewBag.period == "1year" || ViewBag.period == "3month" || ViewBag.period == "6month")
                        {

                            switch (item.date)
                            {
                                case 1:
                                    item.monthName = "January";
                                    break;
                                case 2:
                                    item.monthName = "February";
                                    break;
                                case 3:
                                    item.monthName = "March";
                                    break;
                                case 4:
                                    item.monthName = "April";
                                    break;
                                case 5:
                                    item.monthName = "May";
                                    break;
                                case 6:
                                    item.monthName = "June";
                                    break;
                                case 7:
                                    item.monthName = "July";
                                    break;
                                case 8:
                                    item.monthName = "August";
                                    break;
                                case 9:
                                    item.monthName = "September";
                                    break;
                                case 10:
                                    item.monthName = "October";
                                    break;
                                case 11:
                                    item.monthName = "November";
                                    break;
                                case 12:
                                    item.monthName = "December";
                                    break;
                            }

                            @item.monthName
                        }
                        else if (ViewBag.period == "1month")
                        {
                            @item.date
                        }
                        </td>

                        <td>@item.rainfall</td>

                    </tr>
                    }




                </table>
        }
    </div>
    
        <div class="col-md-6">
            <h4 style="margin-top: 0">CSV File Upload</h4>
            <p>
                @using (Html.BeginForm("Upload", "Rainfalls", null, FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                    @Html.AntiForgeryToken()
                    @Html.ValidationSummary()
                    <div class="form-group">
                        <input type="file" id="csvFile" name="upload" />
                    </div>

                    <div class="form-group">
                        <input type="submit" value="Upload" class="btn btn-default" />
                    </div>
                }
            </p>
        </div>
    
</div>

                
